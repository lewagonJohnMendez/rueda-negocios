<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rueda de Negocios - Capturador de Contactos</title>
    <link rel="stylesheet" href="assets/css/rueda.css">
</head>
<body>
<main class="container">
    <header>
        <h1>Rueda de Negocios</h1>
        <p>Captura información de contactos y envíala directamente a tu WhatsApp</p>
    </header>

    <div id="notification" role="alert" class="notification"></div>

    <nav class="tabs" role="tablist">
        <button class="tab active" data-tab="manual" role="tab" aria-selected="true">Ingreso Manual</button>
        <button class="tab" data-tab="qr" role="tab" aria-selected="false">Escanear QR</button>
        <button class="tab" data-tab="card" role="tab" aria-selected="false">Foto de Tarjeta</button>
        <button class="tab" data-tab="audio" role="tab" aria-selected="false">Dictado por Voz</button>
    </nav>

    <section class="tab-content active" id="manual-tab" role="tabpanel">
        <form id="contact-form">
            <div class="form-group">
                <label for="name">Nombre:</label>
                <input type="text" id="name" placeholder="Nombre completo" required>
            </div>
            <div class="form-group">
                <label for="company">Empresa:</label>
                <input type="text" id="company" placeholder="Nombre de la empresa" required>
            </div>
            <div class="form-group">
                <label for="position">Cargo:</label>
                <input type="text" id="position" placeholder="Puesto o cargo">
            </div>
            <div class="form-group">
                <label for="phone">Teléfono:</label>
                <input type="tel" id="phone" placeholder="Número de teléfono" pattern="\+?[0-9\s-]{7,15}">
            </div>
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" placeholder="Correo electrónico">
            </div>
            <div class="form-group">
                <label for="notes">Notas adicionales:</label>
                <textarea id="notes" placeholder="Información adicional que quieras recordar"></textarea>
            </div>
            <button type="submit" id="save-contact">Guardar Contacto</button>
        </form>
    </section>

    <section class="tab-content" id="qr-tab" role="tabpanel">
        <div id="qr-reader" style="width: 100%"></div>
        <div id="scan-result"></div>
    </section>

    <section class="tab-content" id="card-tab" role="tabpanel">
        <div class="form-group">
            <label for="card-option">Selecciona una opción:</label>
            <select id="card-option">
                <option value="camera">Usar la cámara</option>
                <option value="upload">Subir una imagen</option>
            </select>
        </div>
        <div id="camera-section">
            <div class="camera-container">
                <video id="camera-preview" autoplay playsinline></video>
            </div>
            <button id="capture-btn" type="button">Capturar Foto</button>
        </div>
        <div id="upload-section" style="display: none;">
            <div class="form-group">
                <label for="card-upload">Selecciona una imagen de la tarjeta:</label>
                <input type="file" id="card-upload" accept="image/*">
            </div>
            <div class="camera-container">
                <img id="image-preview" src="#" alt="Vista previa" style="display: none;">
            </div>
        </div>
        <div class="ocr-loading" id="ocr-loading">
            <p>Procesando imagen...</p>
            <div class="spinner"></div>
        </div>
        <div class="ocr-result" id="ocr-result" style="display: none;">
            <h4>Texto detectado:</h4>
            <p id="detected-text"></p>
        </div>
        <button id="process-card" type="button" style="display: none;">Procesar Tarjeta</button>
        <button id="save-from-card" type="button" style="display: none;">Guardar Información</button>
    </section>

    <section class="tab-content" id="audio-tab" role="tabpanel">
        <div class="form-group">
            <label for="voice-notes">Notas por voz:</label>
            <textarea id="voice-notes" placeholder="Haz clic en el botón y comienza a hablar..." readonly></textarea>
        </div>
        <button id="start-recording" type="button">Comenzar a Grabar</button>
        <button id="stop-recording" type="button" disabled>Detener Grabación</button>
        <button id="save-voice-notes" type="button" disabled>Guardar Notas</button>
    </section>

    <div class="contact-preview">
        <h3>Contacto actual:</h3>
        <div id="contact-preview-content">No hay información capturada aún</div>
    </div>

    <a href="#" class="whatsapp-btn" id="send-whatsapp">Enviar por WhatsApp</a>
</main>

<script src="https://unpkg.com/html5-qrcode/minified/html5-qrcode.min.js"></script>
<script src="https://unpkg.com/tesseract.js@v2.1.0/dist/tesseract.min.js"></script>
<script src="assets/js/rueda.js" defer></script>
</body>
</html>